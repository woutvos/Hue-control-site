{% extends "layout.html" %} {% block content %}
    <!-- Groups -->
    <div class="container-fluid">
        <h1 class="text-center mb-4">All groups</h1>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 row-cols-xxl-5 g-4">
            {% for group in groups_list %}
                <div class="col">
                    <div class="card">

                        <div class="card-header">
                            <h5>{{ group.name }}</h5>
                        </div>

                        <div class="card-body">
                            <!-- List of all the lights in that group -->
                            <ul class="list-group list-group-flush">
                                {% for light_name in group.lights.name %}
                                    <p class="list-group-item">{{light_name}}</p>
                                {% endfor %}
                            </ul>
                            <a href="/group/{{ group.id }}" class="btn btn-primary">View</a>
                        </div>

                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Lights -->
    <div class="container-fluid">
        <h1 class="text-center mb-4">All lights</h1>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 row-cols-xxl-5 g-4">
            {% for light in lights_list %}
                <div class="col">
                    <div class="card">

                        <div class="card-header">
                            <h5>{{ light.name }}</h5>
                        </div>

                        <div class="card-body">
                            <!-- On/Off -->
                            {% if light.status == false %}
                                <form action="/light/{{ light.id }}/on" method="post">
                                    <button type="submit" value="Turn on" class="btn btn-secondary">
                                        Turn on
                                    </button>
                                </form>
                            {% elif light.status == true %}
                                <form action="/light/{{ light.id }}/off" method="post">
                                    <button type="submit" value="Turn off" class="btn btn-primary">
                                        Turn off
                                    </button>
                                </form>
                            {% endif %}

                            <!-- Brightness -->
                            <form action="/light/{{ light.id }}/brightness" method="post">
                                <div class="form-group mt-3">
                                    <label for="brightness">Brightness</label>
                                    <input type="range" class="form-control" id="brightness" name="brightness" min="1" max="254"
                                        value="{{ light.brightness }}" />
                                </div>
                                <button type="submit" value="Set brightness" class="btn btn-secondary btn-sm mt-2">
                                    Set brightness
                                </button>
                            </form>

                            <!-- Color -->
                            <form action="/light/{{ light.id }}/color" method="post">
                                <div class="form-group mt-3">
                                    <label for="color">Color</label>
                                    <input type="color" class="form-control" id="color" name="color" value="#{{ light.hex }}" />
                                </div>
                                <button type="submit" value="Set color" class="btn btn-secondary btn-sm mt-2">
                                    Set color
                                </button>
                            </form>
                        </div>

                        <div class="card-footer card-text text-muted">
                            <small>Id: {{ light.id }}</small>
                            <br />
                            <small>Reachable: {{ light.reachable }}</small>
                            <br />
                            <small>Colormode: {{ light.colormode }}</small>
                            <br />
                            <small>Type: {{ light.type }}</small>
                        </div>
                        
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock content %}